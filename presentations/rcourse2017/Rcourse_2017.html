<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Statistics and Data Analysis Using R</title>
<meta name="author" content="(Department of Oncology, JHU SOM)"/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/reveal.js/3.0.0/css/reveal.css"/>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/reveal.js/3.0.0/css/theme/serif.css" id="theme"/>

<link rel="stylesheet" href="./presentation.css"/>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/reveal.js/3.0.0/lib/css/zenburn.css"/>
<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'https://cdn.jsdelivr.net/reveal.js/3.0.0/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide" data-background="./images/Rlogo2.png"><h1 class="title">Statistics and Data Analysis Using R</h1><h2 class="author">Department of Oncology, JHU SOM</h2><h2 class="date">Fall, 2017</h2><p class="date">Created: 2017-11-09 Thu 15:07</p>
</section>
<section>
<section id="slide-org0bf347d" data-background="" data-background-repeat="t">
<h2 id="org0bf347d"><span class="section-number-2">1</span> Syllabus</h2>
<div class="outline-text-2" id="text-1">
</div></section>
</section>
<section>
<section id="slide-org18779a8" data-background="" data-background-repeat="t">
<h3 id="org18779a8"><span class="section-number-3">1.1</span> What is this course?</h3>
<ul>
<li>A hands on introduction to the <code>R</code> statistical software suite for biomedical scientists</li>
<li>Prerequisite
<ul>
<li>No formal background in statistics or programming is necessary</li>
<li>Familiar with the plots and statistical summaries that are most commonly used in biomedical papers</li>

</ul></li>
<li>Primary objective
<ul>
<li>Learn to use R</li>

</ul></li>
<li>Secondary objective
<ul>
<li>Get familiar with the standards of practice that programmers and data
analysts have implemented to ensure <i>transparency</i>, <i>accuracy</i> and
<i>accountability</i></li>

</ul></li>

</ul>
</section>
</section>
<section>
<section id="slide-org12a4875" data-background="" data-background-repeat="t">
<h3 id="org12a4875"><span class="section-number-3">1.2</span> Instructors</h3>
<ul>
<li>Luigi Marchionni, MD, PhD (marchion@jhu.edu)</li>
<li>Leslie Cope, PhD (cope@jhu.edu)</li>
<li>Elana Fertig, PhD (ejfertig@jhmi.edu)</li>
<li>Chenguang Wang, PhD (<i>cwang68@jhmi.edu</i>)</li>

</ul>
</section>
</section>
<section>
<section id="slide-org9d36ea0" data-background="" data-background-repeat="t">
<h3 id="org9d36ea0"><span class="section-number-3">1.3</span> Textbook</h3>
<ul>
<li>No required course text book</li>
<li>Get comfortable with he extensive built-in and online documentation</li>
<li>Some options 
<ul>
<li>Leemis (2015).  Learning Base R. Lightning Source</li>
<li>Murray (2013). <a href="https://www.amazon.com/Learn-R-Day-Steven-Murray-ebook/dp/B00GC2LKOK">Learn R in a Day</a>. Ebook</li>
<li>Xie (2013). Dynamic Documents with R and knitr. Chapman &amp; Hall/CRC</li>
<li>Murrell (2005). R Graphics, Chapman &amp; Hall/CRC Press</li>
<li>Venables &amp; Ripley (2002). Modern Applied Statistics with S, Springer</li>
<li>Venables &amp; Ripley (2000). S Programming, Springer</li>
<li><a href="http://www.r-project.org/doc/bib/R-books.html">http://www.r-project.org/doc/bib/R-books.html</a></li>

</ul></li>

</ul>
</section>
</section>
<section>
<section id="slide-orgfac2eb5" data-background="" data-background-repeat="t">
<h3 id="orgfac2eb5"><span class="section-number-3">1.4</span> Time and space</h3>
<ul>
<li>Meet on Wednesdays and Fridays between November 8th and December 15th, from
10am-12pm</li>
<li>No class on November 22 or 24, during the thanksgiving break</li>
<li>Class will be held in the Pre-Clinical Teaching Building, Room G18/19 
<ul>
<li>except for Nov. 17, meet in Room G14</li>

</ul></li>

</ul>
</section>
</section>
<section>
<section id="slide-org191e467" data-background="" data-background-repeat="t">
<h3 id="org191e467"><span class="section-number-3">1.5</span> Course evaluation</h3>
<ul>
<li>Graded on a pass/fail basis</li>
<li>Depends on attendance at the majority of classes and active participation
in lab exercises</li>

</ul>
</section>
</section>
<section>
<section id="slide-org4d23d56" data-background="" data-background-repeat="t">
<h3 id="org4d23d56"><span class="section-number-3">1.6</span> Course content</h3>
<div class="outline-text-3" id="text-1-6">
</div></section>
<section id="slide-orgdfe2846" data-background="" data-background-repeat="t">
<h4 id="orgdfe2846"><span class="section-number-4">1.6.1</span> <i>Week 1</i> - Navigating R</h4>
<ul>
<li>Install R, Rstudio</li>
<li>Become familiar with the mechanics of <code>R</code> and <code>Rstudio</code></li>
<li>Learn the basic data types and data structures in <code>R</code></li>
<li>Learn to subset, manipulate data</li>
<li>Learn to read in data and write out results</li>

</ul>
</section>
<section id="slide-org02708d2" data-background="" data-background-repeat="t">
<h4 id="org02708d2"><span class="section-number-4">1.6.2</span> <i>Week 2</i> - Getting Comfortable</h4>
<ul>
<li>Practice reading in and manipulating data and writing out results</li>
<li>Explore built in plotting and data analysis functions</li>
<li>Learn about data structures and data management in R</li>
<li>Learn to write functions</li>

</ul>
</section>
<section id="slide-orgad03ab9" data-background="" data-background-repeat="t">
<h4 id="orgad03ab9"><span class="section-number-4">1.6.3</span> <i>Week 3</i> - Programming</h4>
<ul>
<li>Learn the basics of programming - loops and if-then statements</li>
<li>Learn to use apply functions in R to perform routine operations</li>
<li>Understand how the organization of your data and the structure of the
functions you write can help or hinder programming tasks</li>

</ul>
</section>
<section id="slide-orgb63ebcb" data-background="" data-background-repeat="t">
<h4 id="orgb63ebcb"><span class="section-number-4">1.6.4</span> <i>Weeks 4 and 5</i></h4>
<ul>
<li>Topics in R Topics may vary according to available time and student
interest</li>
<li>String handling - manipulating character strings to parse file names,
gene names, format figure titles, etc&#x2026;</li>
<li>Debugging: detecting and avoiding errors</li>
<li>Making the most of plots</li>
<li>Formatting output</li>
<li>Advanced data structures</li>

</ul>
</section>
</section>
<section>
<section id="slide-org9c98bf9" data-background="./images/Rlogo2.png" data-background-repeat="t">
<h2 id="org9c98bf9"><span class="section-number-2">2</span> What is <code>R</code>?</h2>
</section>
</section>
<section>
<section id="slide-org19b244d" data-background="" data-background-repeat="t">
<h3 id="org19b244d"><span class="section-number-3">2.1</span> History of <i>R</i></h3>
<ul>
<li><code>R</code> is an outgrowth of the <code>S</code> language and environment</li>
<li><code>S</code> is a high level language and an internal statistical environment for
data analysis and graphics</li>
<li><p>
<code>S</code> was developed for Bell Labs in 1976 under the leadership of <a href="https://statistics.stanford.edu/people/john-chambers">John Chambers</a>     
</p>
<blockquote nil>
<p>
to turn ideas into software quickly and faithfully
</p>
</blockquote></li>

</ul>

</section>
<section  data-background="" data-background-repeat="t">
<ul>
<li><code>S-PLUS</code> and <code>R</code> are two <code>S</code> dialects</li>
<li><code>S-PLUS</code> is a <i>commercial</i> implementation of the <code>S</code></li>
<li><code>R</code> is also known as <i>GNU S</i></li>
<li>Most <code>S</code> code will run without modification in <code>R</code></li>
<li><code>S-Plus</code> offers a sophisticated graphical user interface, <code>R</code> does not</li>
<li>Standard data files for <code>S</code> and <code>R</code> are not compatible</li>
<li>Graphical output differs</li>

</ul>

</section>
<section  data-background="" data-background-repeat="t">
<ul>
<li><code>R</code> started in the early 1990’s as a project by <a href="https://en.wikipedia.org/wiki/Ross_Ihaka">Ross Ihaka</a> and <a href="https://en.wikipedia.org/wiki/Robert_Gentleman_(statistician)">Robert
Gentleman</a> at the University of Auckland, New Zealand, intended to provide a
statistical environment in their teaching lab</li>
<li><code>R</code> is a language and environment for statistical computing and graphics</li>
<li><code>R</code> provides an Open Source route to participation in research in statistical
methodology</li>
<li>Most user-visible functions are written in <code>R</code> itself</li>
<li>It is possible to develop <code>R</code> procedures written in other languages (C,
C++, or FORTRAN)</li>
<li>System commands can be called from within <code>R</code></li>

</ul>
</section>
</section>
<section>
<section id="slide-org83dd28f" data-background="" data-background-repeat="t">
<h3 id="org83dd28f"><span class="section-number-3">2.2</span> Programming languages</h3>
<ul>
<li><a href="https://en.wikipedia.org/wiki/B_(programming_language)">B</a>  <a href="https://en.wikipedia.org/wiki/C_(programming_language)">C</a>  <a href="https://en.wikipedia.org/wiki/D_(programming_language)">D</a>  <a href="https://en.wikipedia.org/wiki/E_(programming_language)">E</a></li>
<li><a href="https://en.wikipedia.org/wiki/F_(programming_language)F">F</a>  <a href="https://en.wikipedia.org/wiki/G_(programming_language)">G</a>  <a href="https://en.wikipedia.org/wiki/J_(programming_language)">J</a>  <a href="https://en.wikipedia.org/wiki/K_(programming_language)">K</a></li>
<li><a href="https://en.wikipedia.org/wiki/L_(programming_language)">L</a>  <a href="https://en.wikipedia.org/wiki/Q_(programming_language_from_Kx_Systems)">Q</a>  <a href="https://en.wikipedia.org/wiki/R_(programming_language)">R</a>  <a href="https://en.wikipedia.org/wiki/S_(programming_language)">S</a>  <a href="https://en.wikipedia.org/wiki/T_(programming_language)">T</a></li>

</ul>
</section>
</section>
<section>
<section id="slide-orgf237794" data-background="" data-background-repeat="t">
<h3 id="orgf237794"><span class="section-number-3">2.3</span> Why <i>R</i>?</h3>
<ul>
<li><code>R</code> is a free and powerful tool for statistical analyses</li>
<li><code>R</code> compiles and runs on a wide variety of UNIX platforms and similar
systems (including FreeBSD and Linux), Windows and MacOS</li>
<li>Open-source code, well curated and error checked through a wide and active
user community</li>
<li><code>R</code> provides a wide variety of statistical techniques including linear and
nonlinear modelling, classical statistical tests, time-series analysis,
genomics, and many more</li>
<li><code>R</code> is highly extensible</li>
<li><code>R</code> produces well-designed publication-quality plots, including mathematical
symbols and formulae where needed</li>

</ul>
</section>
<section id="slide-org60a192a" data-background="" data-background-repeat="t">
<h4 id="org60a192a"><span class="section-number-4">2.3.1</span> R environment</h4>
<ul>
<li>data handling and storage</li>
<li>computations on different types</li>
<li>large collections of statistical analysis tools</li>
<li>graphical support</li>
<li>programming language</li>

</ul>
</section>
<section id="slide-org8e780e1" data-background="" data-background-repeat="t">
<h4 id="org8e780e1"><span class="section-number-4">2.3.2</span> Bioconductor</h4>
<ul>
<li>A particular R strength is genomics research</li>
<li>Bioconductor 
<ul>
<li>A suite of <code>R</code> packages dedicated to genomic data analysis,
visualization and management</li>
<li>Facilitates biological metadata integration (e.g.,Gene Ontology, PubMed)
in the analysis of experimental data</li>
<li>New methods are quickly implemented in <code>R</code> and made available via
Bioconductor</li>
<li>The undeclared <i>standard</i> in literature</li>
<li><a href="https://www.bioconductor.org/">https://www.bioconductor.org/</a></li>

</ul></li>

</ul>
</section>
</section>
<section>
<section id="slide-org8c08f81" data-background="" data-background-repeat="t">
<h3 id="org8c08f81"><span class="section-number-3">2.4</span> Why not <i>R</i>?</h3>
<ul>
<li><code>R</code> is accused of being slow, memory-hungry, and unable to handle large
data sets</li>
<li><code>R</code> has no GUI and no commercial service
<ul>
<li>Error messages can be cryptic</li>
<li>Documentation is controlled by the code developer and may be difficult to
follow</li>

</ul></li>
<li>Regulatory guidelines (e.g. 21 CFR 11) require tedious effort to validate
and verify things. A large proportion of <code>R</code> packages and applications are
lack of such documentation</li>

</ul>
</section>
</section>
<section>
<section id="slide-org2119111" data-background="" data-background-repeat="t">
<h3 id="org2119111"><span class="section-number-3">2.5</span> Resources</h3>
<ul>
<li><i>CRAN</i>: The Comprehensive R Archive Network
<ul>
<li><a href="https://cran.r-project.org/">https://cran.r-project.org/</a></li>
<li>A network of ftp and web servers that store identical,
up-to-date, versions of code and documentation for R</li>
<li>Mirror list on <a href="https://cran.r-project.org/mirrors.html">https://cran.r-project.org/mirrors.html</a></li>

</ul></li>
<li><i>GOOGLE</i></li>
<li><i>RSeek</i>
<ul>
<li>An R-specific, Google powered search engine</li>
<li><a href="http://www.rseek.org/">http://www.rseek.org/</a></li>

</ul></li>

</ul>

</section>
<section  data-background="" data-background-repeat="t">

<ul>
<li>Active community mailing lists
<ul>
<li><a href="http://www.r-project.org/mail.html">http://www.r-project.org/mail.html</a>
<ul>
<li>R-announce: A moderated list for major announcements about the
development of R and the availability of new code.</li>
<li>R-packages: A moderated list for announcements on the availability of
new or enhanced contributed packages.</li>
<li><i>R-help</i>: The main R mailing list, for discussion about problems and
solutions using R, announcements (not covered by ‘R-announce’ and
‘R-packages’) about the development of R and the availability of new
code</li>
<li>R-devel: This list is for questions and discussion about code development in R.</li>
<li>R-package-devel: A list which which provides a forum for learning about
the R package development process.</li>

</ul></li>
<li>Follow the <a href="https://www.r-project.org/posting-guide.html">posting guidelines</a></li>
<li>Do not be discouraged!!! A helpful response will usually come along</li>

</ul></li>

</ul>
</section>
</section>
<section>
<section id="slide-org5f65e8a" data-background="./images/Rlogo2.png" data-background-repeat="t">
<h2 id="org5f65e8a"><span class="section-number-2">3</span> Getting Started with R</h2>
</section>
</section>
<section>
<section id="slide-org850ec54" data-background="" data-background-repeat="t">
<h3 id="org850ec54"><span class="section-number-3">3.1</span> Installation</h3>
<ul>
<li>R</li>
<li>RStudio</li>

</ul>
</section>
<section id="slide-org6b3c62f" data-background="" data-background-repeat="t">
<h4 id="org6b3c62f"><span class="section-number-4">3.1.1</span> R</h4>
<ul>
<li><a href="https://cran.r-project.org/">https://cran.r-project.org/</a></li>
<li>Subdirectories
<ul>
<li><i>base</i>: base distribution that provides the base package which is
required to run R and contains the most fundamental functions</li>
<li><i>contrib</i>: Contributed CRAN packages</li>
<li><i>Rtools</i>: Tools to build <code>R</code> and <code>R</code> packages</li>

</ul></li>

</ul>

</section>
<section  data-background="./images/Rlogo2.png" data-background-repeat="t">
<ul>
<li>MacOS
<ul>
<li>The use of X11 requires <a href="https://www.xquartz.org/">XQuartz</a> to be installed</li>
<li>Always re-install <code>XQuartz</code> when upgrading your OS X to a new major version</li>

</ul></li>
<li>Ubuntu
<ul>
<li><p>
Add repository to <code>/etc/apt/sources.list</code>
</p>
<pre class="example">
deb https://&lt;my.favorite.cran.mirror&gt;/bin/linux/ubuntu precise/
</pre></li>

<li><p>
Install by
</p>
<div class="org-src-container">

<pre><code class="sh" >sudo apt-get update   
sudo apt-get install r-base
</code></pre>
</div></li>

</ul></li>

</ul>
</section>
<section id="slide-orgeb1d7ec" data-background="" data-background-repeat="t">
<h4 id="orgeb1d7ec"><span class="section-number-4">3.1.2</span> RStudio</h4>
<ul>
<li>An integrated development environment (IDE) for <code>R</code></li>
<li>Includes a <i>console</i>, syntax-highlighting <i>editor</i>, as well as <i>tools</i> for
plotting, history, debugging and workspace management</li>
<li>Available in open source and commercial editions</li>
<li>Runs on the desktop (Windows, Mac, and Linux) or in a browser connected to
RStudio Server</li>
<li><a href="https://www.rstudio.com/">https://www.rstudio.com/</a></li>

</ul>
</section>
<section id="slide-orgee10949" data-background="" data-background-repeat="t">
<h4 id="orgee10949"><span class="section-number-4">3.1.3</span> More about RStudio</h4>
<ul>
<li>Preference
<ul>
<li>Appearance</li>
<li>Pane Layout</li>

</ul></li>
<li>Autocomplete with tab
<ul>
<li>If you type tab RStudio will suggest functions, variable names, file
names, etc.</li>

</ul></li>
<li>Run code with <code>CMD + Enter</code></li>
<li>RStudio keybord shortcuts:
<a href="https://support.rstudio.com/hc/en-us/articles/200711853-Keyboard-Shortcuts">https://support.rstudio.com/hc/en-us/articles/200711853-Keyboard-Shortcuts</a></li>
<li><code>Promise</code> in Environment pane
<ul>
<li>A <code>promise</code> means the data or function will be there when you actually need it</li>
<li><code>R</code> was told to load this set or function, but the set or function have not  actually been used anywhere</li>
<li><code>R</code> didn’t feel the need to load it fully into memory</li>

</ul></li>

</ul>
</section>
</section>
<section>
<section id="slide-org1afc69d" data-background="" data-background-repeat="t">
<h3 id="org1afc69d"><span class="section-number-3">3.2</span> Start R</h3>
<ul>
<li>Without RStudio
<ul>
<li>Windows: Double-click on <code>R</code></li>
<li>Mac OS X: Click on <code>R</code></li>
<li>Unix: Type <code>R</code></li>

</ul></li>
<li>With RStudio
<ul>
<li>Windows: Double-click on <code>RStudio</code></li>
<li>Mac OS X: Click on <code>RStudio</code></li>

</ul></li>

</ul>
</section>
</section>
<section>
<section id="slide-org01aa227" data-background="" data-background-repeat="t">
<h3 id="org01aa227"><span class="section-number-3">3.3</span> Working directory</h3>
<ul>
<li>Directory on your computer on which you are working</li>
<li>Default location from which all files will be loaded and to which all files will be saved</li>
<li><p>
Get and set working directory 
</p>
<div class="org-src-container">

<pre><code class="R" >getwd()
setwd("~/Temp")
</code></pre>
</div></li>
<li>In RStudio, go to <code>File</code> &gt; <code>More</code></li>

</ul>
</section>
</section>
<section>
<section id="slide-org2cd9580" data-background="" data-background-repeat="t">
<h3 id="org2cd9580"><span class="section-number-3">3.4</span> Get help</h3>
<ul>
<li>There is an extensive built in help system</li>
<li>Can be accessed from the tool bar or from the command line</li>

</ul>
</section>
<section id="slide-orge3eda32" data-background="" data-background-repeat="t">
<h4 id="orge3eda32"><span class="section-number-4">3.4.1</span> Examples</h4>
<ul>
<li><p>
Open up the whole help system in .html format and look through the table
of contents for your general topic by
</p>
<div class="org-src-container">

<pre><code class="R" >help.start()
</code></pre>
</div></li>
<li><p>
Search the help system for documentation matching a given character
string by
</p>
<div class="org-src-container">

<pre><code class="R" >help.search("sort")
??sort
</code></pre>
</div></li>
<li><p>
Returns a character vector giving the names of all objects in the search
list matching a given character
</p>
<div class="org-src-container">

<pre><code class="R" >apropos("sort")
</code></pre>
</div></li>
<li><p>
Get help on specific functions by
</p>
<div class="org-src-container">

<pre><code class="R" >help(sort)
?sort
</code></pre>
</div></li>

</ul>
</section>
<section id="slide-org644a0ab" data-background="" data-background-repeat="t">
<h4 id="org644a0ab"><span class="section-number-4">3.4.2</span> The anatomy of the R help file</h4>
<ul>
<li>There are several sections to an R help file
<ul>
<li><i>Description</i>: Briefly describes what the function does</li>
<li><i>Usage</i>: Shows how the function is invoked, including all standard
arguments list all inputs with a brief description of each</li>
<li><i>Arguments Details</i>: Further details, if warranted</li>
<li><i>Value</i>: Describes the output</li>
<li><i>See Also</i>: Lists related functions that you might have meant to look up
instead</li>
<li><i>Examples</i>: Can cut and paste into R to demonstrate the function</li>

</ul></li>

</ul>
</section>
</section>
<section>
<section id="slide-orgfa6f378" data-background="" data-background-repeat="t">
<h3 id="orgfa6f378"><span class="section-number-3">3.5</span> Packages</h3>
<ul>
<li>The fundamental unit of shareable functions in <code>R</code> is <code>package</code></li>
<li>A package integrates <i>code</i>, <i>data</i>, <i>documentation</i>, and <i>tests</i> for a
group of functions and data</li>
<li><a href="https://cran.r-project.org/">CRAN</a> is the public clearing house for <code>R</code> packages</li>
<li>As of this week, there are over \(11764\) packages available on <a href="https://cran.r-project.org/">CRAN</a></li>

</ul>
</section>
<section id="slide-org29f191a" data-background="" data-background-repeat="t">
<h4 id="org29f191a"><span class="section-number-4">3.5.1</span> How to use packages?</h4>
<ul>
<li>Install a package by <i>install.packages("foo")</i></li>
<li>Use a package by <i>library("foo")</i></li>
<li>Get help on a package by <i>help(package = "foo")</i></li>
<li>Show all demos in a package by <i>demo(package = "foo")</i></li>
<li>Run a specific demo by <i>demo("topic", package = "foo")</i></li>
<li>Check data in a package by <i>data(package = "foo")</i></li>
<li>Load data from a package by <i>data(foo.data, package="foo")</i></li>
<li>Show all vignettes by <i>vignette(package = "foo")</i></li>
<li>Load a specific vignettes by <i>vignette("topic", package = "foo")</i></li>
<li>Remove an installed package by <i>remove.packages(package = "foo")</i></li>
<li>Detach a package by <i>detach("package:foo", unload=TRUE)</i></li>

</ul>
</section>
<section id="slide-orga92945b" data-background="" data-background-repeat="t">
<h4 id="orga92945b"><span class="section-number-4">3.5.2</span> Load data</h4>
<ul>
<li>In RStudio, when a data set in a package hasn't been accessed yet, it is
shown as <code>&lt;Promise&gt;</code> in the <code>Environment</code> pane</li>

</ul>
</section>
<section id="slide-orgce77ce4" data-background="" data-background-repeat="t">
<h4 id="orgce77ce4"><span class="section-number-4">3.5.3</span> Example</h4>
<ul>
<li><code>beanz</code> is a package for Bayesian analysis of heterogeneous treatment
effect.</li>
<li>How much information can you find for <code>beanz</code>?</li>

</ul>
</section>
</section>
<section>
<section id="slide-orgf9e578f" data-background="" data-background-repeat="t">
<h3 id="orgf9e578f"><span class="section-number-3">3.6</span> Global environment</h3>
<ul>
<li>All functions and variables defined in console are in the global
environment</li>
<li>Important functions 
<ul>
<li><i>ls()</i>, <i>objects()</i>: list objects</li>
<li><i>rm()</i>: remove objects</li>
<li><i>sessionInfo()</i>: collect information about the current R session</li>
<li><i>save.image()</i>: save entire environment</li>

</ul></li>
<li><p>
Example 
</p>
<div class="org-src-container">

<pre><code class="R" >ls();
ls(pattern='x');

xx <- 1:5; 
ls(pattern='x');

## remove a list of variables 
x <- 1; y <- 2; ls();
rm('x','y'); ls();

save.image(file="mydata.RData");
load(file="mydata.RData");
</code></pre>
</div></li>

</ul>
</section>
</section>
<section>
<section id="slide-orgc432c13" data-background="" data-background-repeat="t">
<h3 id="orgc432c13"><span class="section-number-3">3.7</span> Command history</h3>
<ul>
<li>Function <code>history()</code>  will get all the previous commands</li>
<li>Select commands containing a specific phrase with the pattern variable
(e.g., history(pattern="save"))</li>
<li>Type the <i>up arrow</i> in <code>R</code> console to get the previous command</li>
<li><p>
History of all commands run in the session can be saved and loaded later
</p>
<div class="org-src-container">

<pre><code class="R" >savehistory(file='SavedHistory.Rhistory')
loadhistory(file='SavedHistory.Rhistory')
</code></pre>
</div></li>

</ul>
</section>
</section>
<section>
<section id="slide-orga0af046" data-background="" data-background-repeat="t">
<h3 id="orga0af046"><span class="section-number-3">3.8</span> Quit R</h3>
<ul>
<li><p>
Quit R by 
</p>
<div class="org-src-container">

<pre><code class="R" >q()
quit()
</code></pre>
</div></li>
<li>R may ask <code>Save workspace image? [y/n/c]:</code>
<ul>
<li><i>y</i>: Will save a file .RData and .Rhistory with the commands from your
workspace into your working directory before exiting. R will
automatically restore your workspace from these files if you open R from
this directory</li>
<li><i>n</i>: Will exit R without saving any files</li>
<li><i>c</i>: Will cancel the quit command</li>

</ul></li>

</ul>
</section>
</section>
<section>
<section id="slide-orgb99822b" data-background="./images/Rlogo2.png" data-background-repeat="t">
<h2 id="orgb99822b"><span class="section-number-2">4</span> Basics of R</h2>
</section>
</section>
<section>
<section id="slide-org97f286d" data-background="" data-background-repeat="t">
<h3 id="org97f286d"><span class="section-number-3">4.1</span> R as a calculator</h3>
<div class="outline-text-3" id="text-4-1">
</div></section>
<section id="slide-org865620c" data-background="" data-background-repeat="t">
<h4 id="org865620c"><span class="section-number-4">4.1.1</span> Operations</h4>
<ul>
<li>R follows standard order of operations 
<ol>
<li>Terms inside parentheses</li>
<li>Exponents and roots</li>
<li>Multiplication and division</li>
<li>Addition and subtraction</li>

</ol></li>
<li>Multiplication requires explicit use of \(*\) 
<ul>
<li>E.g., write \(3*(2+5)\) rather than \(3(2+5)\)</li>

</ul></li>

</ul>
</section>
<section id="slide-orgd60755d" data-background="" data-background-repeat="t">
<h4 id="orgd60755d"><span class="section-number-4">4.1.2</span> Arithmetic operators</h4>
<ul>
<li><i>x + y</i>: Adding \(x\) and \(y\)</li>
<li><i>x - y</i>: Subtracting \(y\) from \(x\)</li>
<li><i>x * y</i>: Multiplying \(x\) and \(y\)</li>
<li><i>x / y</i>: Dividing \(x\) and \(y\)</li>
<li><i>x ^ y</i>: Raising \(x\) to the \(y\)th power</li>
<li><i>x %% y</i>: \(x\) mod \(y\)</li>
<li><i>x %/% y</i>: Integer division of \(y\) into \(x\)</li>

</ul>
</section>
<section id="slide-org11185ec" data-background="" data-background-repeat="t">
<h4 id="org11185ec"><span class="section-number-4">4.1.3</span> Trigonometric functions and values</h4>
<ul>
<li>\(pi\): \(\pi\)</li>
<li>\(sin(x)\): Sine of \(x\) (in radians)</li>
<li>\(cos(x)\): Cosine of \(x\) (in radians)</li>
<li>\(tan(x)\): Tangent of \(x\) (in radians)</li>

</ul>
</section>
<section id="slide-org0b0ca0b" data-background="" data-background-repeat="t">
<h4 id="org0b0ca0b"><span class="section-number-4">4.1.4</span> Powers and logs</h4>
<ul>
<li>\(abs(x)\): Compute the absolute value of \(x\)</li>
<li>\(sqrt(x)\): Take the square root of \(x\)</li>
<li>\(exp(x)\): Raise e to the \(x\)th power</li>
<li>\(log(x)\): Computes the natural log (ln) of \(x\)</li>
<li>\(log2(x)\): Computes log base 2 of \(x\)</li>
<li>\(log10(x)\): Computes log base 10 of \(x\).</li>
<li>\(log(x, base=b)\): Computes log base \(b\) of \(x\)</li>

</ul>
</section>
<section id="slide-org38f95ae" data-background="" data-background-repeat="t">
<h4 id="org38f95ae"><span class="section-number-4">4.1.5</span> Logical comparisons</h4>
<ul>
<li><code>R</code> reserves <code>TRUE</code> and <code>FALSE</code> as special logical values</li>
<li><code>R</code> recognizes the abbreviations T and F</li>
<li>Basic comparisons include
<ul>
<li>\(x == y\): <code>TRUE</code> if \(x\) equals \(y\)</li>
<li>\(x != y\): <code>TRUE</code> if \(x\) does not equal \(y\)</li>
<li>\(x > y\)</li>
<li>\(x >= y\)</li>
<li>\(x < y\)</li>
<li>\(x <= y\)</li>

</ul></li>

</ul>
</section>
<section id="slide-org3ff3498" data-background="" data-background-repeat="t">
<h4 id="org3ff3498"><span class="section-number-4">4.1.6</span> Logical operators</h4>
<ul>
<li>\(!x\): Not x</li>
<li>\(x \& y\): \(x\) and \(y\). <code>FALSE</code> when either \(x\) or \(y\) is <code>FALSE</code></li>
<li>\(x | y\): \(x\) or \(y\). <code>FALSE</code> when both \(x\) and \(y\) are <code>FALSE</code></li>
<li>\(xor(x, y)\): <code>TRUE</code> when only one of \(x\) or \(y\) is =TRUE</li>

</ul>
</section>
<section id="slide-org35ee879" data-background="" data-background-repeat="t">
<h4 id="org35ee879"><span class="section-number-4">4.1.7</span> Exercises</h4>
<ul>
<li>Compute the sine of 60 degrees 
<ul>
<li>Hint: an angle \(x\) in degrees can be converted to radiants by \(\pi x \over 180\)</li>

</ul></li>
<li>Determine whether the angle \(\pi \over 4\) is in the first quadrant
<ul>
<li>Hint: an angle \(x\) is in the first quadrant when its \(sin(x)\) and
\(cos(x)\) are both positive</li>

</ul></li>
<li>What happens when you apply arithmetic operations to logical values (e.g.,
TRUE+TRUE, TRUE+FALSE, TRUE*TRUE, . . . )? What can you conclude about how
logical values are stored?</li>
<li>The <code>R</code> function <code>sind</code> calculate the sine of a degree. Find this
function and use it to verify your result from Exercise 1.</li>

</ul>
</section>
<section id="slide-org578307a" data-background="" data-background-repeat="t">
<h4 id="org578307a"><span class="section-number-4">4.1.8</span> Solutions</h4>
<div class="org-src-container">

<pre><code class="R" >sin(pi * 60/ 180)
sin(pi/4) > 0 & cos(pi/4) > 0   
TRUE+TRUE 
TRUE*FALSE
</code></pre>
</div>

<pre class="example">
[1] 0.8660254
[1] TRUE
[1] 2
[1] 0
</pre>

</section>
</section>
<section>
<section id="slide-orge13fd00" data-background="" data-background-repeat="t">
<h3 id="orge13fd00"><span class="section-number-3">4.2</span> Data types</h3>
<div class="outline-text-3" id="text-4-2">
</div></section>
<section id="slide-org9361a67" data-background="" data-background-repeat="t">
<h4 id="org9361a67"><span class="section-number-4">4.2.1</span> Objects in R</h4>
<ul>
<li><code>R</code> has object-oriented features</li>
<li>Objects are members of <i>classes</i></li>
<li>Almost all things in <code>R</code> – functions, datasets, results, etc. – are
objects</li>
<li>Graphics are written out and not stored as objects</li>
<li>Each object is stored in memory in a different way</li>
<li><code>R</code> functions will interact with each type differently</li>

</ul>
</section>
<section id="slide-org76cd96c" data-background="" data-background-repeat="t">
<h4 id="org76cd96c"><span class="section-number-4">4.2.2</span> Atomic classes of objects</h4>
<ul>
<li>R has five basic or <i>atomic</i> classes of objects: 
<ul>
<li>character</li>
<li>numeric (real numbers)</li>
<li>integer</li>
<li>logical (True/False)</li>
<li>complex</li>

</ul></li>
<li><p>
Example 
</p>
<div class="org-src-container">

<pre><code class="R" >x <- "a";  class(x);
x <- 1;    class(x);
x <- 1L;   class(x);
x <- TRUE; class(x);
x <- 2+3i; class(x);
</code></pre>
</div>

<pre class="example">
[1] "character"
[1] "numeric"
[1] "integer"
[1] "logical"
[1] "complex"
</pre></li>

</ul>

</section>
<section id="slide-org288b5c8" data-background="" data-background-repeat="t">
<h4 id="org288b5c8"><span class="section-number-4">4.2.3</span> Attributes</h4>
<ul>
<li><code>R</code> objects can have attributes to store metadata about the object
<ul>
<li>names, dimension names</li>
<li>dimensions (e.g. matrices, arrays)</li>
<li>class</li>
<li>length</li>
<li>other user-defined attributes/metadata</li>

</ul></li>
<li>Attributes can be accessed 
<ul>
<li>individually with <i>attr()</i></li>
<li>or all at once (as a list) with <i>attributes()</i></li>

</ul></li>

</ul>
</section>
<section id="slide-orgc6cbde1" data-background="" data-background-repeat="t">
<h4 id="orgc6cbde1"><span class="section-number-4">4.2.4</span> Attributes example</h4>
<div class="org-src-container">

<pre><code class="R" >x <- cbind(a = 1:3, pi = pi);
print(x);
attr(x, "dimnames");
attr(x, "arbitrary_attribute") <- "This is a test";
attributes(x);
str(x);
</code></pre>
</div>

<pre class="example">
     a       pi
[1,] 1 3.141593
[2,] 2 3.141593
[3,] 3 3.141593
[[1]]
NULL

[[2]]
[1] "a"  "pi"
$dim
[1] 3 2

$dimnames
$dimnames[[1]]
NULL

$dimnames[[2]]
[1] "a"  "pi"


$arbitrary_attribute
[1] "This is a test"
 num [1:3, 1:2] 1 2 3 3.14 3.14 ...
 - attr(*, "dimnames")=List of 2
  ..$ : NULL
  ..$ : chr [1:2] "a" "pi"
 - attr(*, "arbitrary_attribute")= chr "This is a test"
</pre>

</section>
<section id="slide-org443aff1" data-background="" data-background-repeat="t">
<h4 id="org443aff1"><span class="section-number-4">4.2.5</span> Numbers in <code>R</code></h4>
<ul>
<li>Numbers in <code>R</code> a generally treated as numeric objects (i.e. double precision
real numbers)</li>
<li>If you explicitly want an integer, you need to specify the <code>L</code> suffix</li>
<li>Example 
<ul>
<li>Entering \(1\) gives you a numeric object</li>
<li>Entering \(1L\) explicitly gives you an integer</li>

</ul></li>
<li>There is also a special number <i>Inf</i> which
<ul>
<li>represents infinity; e.g. \(1/0\)</li>
<li>can be used in ordinary calculations; e.g. \(1/Inf=0\)</li>

</ul></li>
<li>The value <i>NaN</i> represents an undefined value (<i>not a number</i>); e.g. \(0
      /0\); <i>NaN</i> can also be thought of as a missing value</li>

</ul>
</section>
<section id="slide-org7f4c427" data-background="" data-background-repeat="t">
<h4 id="org7f4c427"><span class="section-number-4">4.2.6</span> String in <code>R</code></h4>
<ul>
<li>Concatenate strings by <i>paste("a", "b", sep="")</i></li>
<li>Split strings by <i>strsplit("a, b, c", split=",")</i></li>
<li>Translate from upper to lower case or vice versa by <i>toupper("abc")</i> and
<i>tolower("ABC")</i></li>
<li>Extract or replace substrings by <i>substring</i></li>
<li><p>
Example
</p>
<div class="org-src-container">

<pre><code class="R" >paste("a", "b", sep="");
strsplit("a, b, c", split=",");
toupper("abc");
tolower("ABC");
substr("abcde", start=2, stop=4);
x <- "abcde"; 
substring(x, first=2) <- "ef";
x;
</code></pre>
</div>

<pre class="example">
[1] "ab"
[[1]]
[1] "a"  " b" " c"
[1] "ABC"
[1] "abc"
[1] "bcd"
[1] "aefde"
</pre></li>

</ul>

</section>
<section  data-background="" data-background-repeat="t">
<ul>
<li><i>Regular expressions</i> can be used for string operations
<ul>
<li>"a" matches the letter <code>a</code></li>
<li>"ABCDE" matches the string <code>ABCDE</code></li>
<li>"A.CDE" matches all strings with a single character between <code>A</code> and <code>CDE</code></li>
<li>"a*b*" matches zero or more <code>a</code>'s followed by zero or more <code>b</code>'s</li>
<li>"[A-Za-z]+" matches one or more characters that are letters</li>
<li>"\\.txt$" matches the string with <code>.txt</code> at the end</li>

</ul></li>
<li><i>sub(regexp, replacement, vector)</i>, <i>gsub(regexp, replacement, vector)</i>
replace the first substring (<i>sub</i>) or all substrings (<i>gsub</i>) that match
the regular expression</li>
<li><i>regexpr(regexp, vector)</i> and <i>gregexpr(regexp, vector)</i> returns the
position of the first (<i>regexpr</i>) or all (<i>gregexpr</i>) matched substring</li>

</ul>
</section>
<section id="slide-org769316b" data-background="" data-background-repeat="t">
<h4 id="org769316b"><span class="section-number-4">4.2.7</span> Explicit Coercion</h4>
<ul>
<li>Variables can be set to specific types</li>
<li><p>
Example 
</p>
<div class="org-src-container">

<pre><code class="R" >x <- as.character(100); x;
x <- as.numeric("12"); x;
x <- as.logical(0); x;
</code></pre>
</div>

<pre class="example">
[1] "100"
[1] 12
[1] FALSE
</pre></li>

<li>Most classes have a function to force variables to be represented as that type
<ul>
<li><i>as.character</i>, <i>as.numeric</i>, <i>as.matrix</i>, <i>as.complex</i>, <i>as.vector</i>,
<i>as.array</i>, etc.</li>

</ul></li>

</ul>
</section>
<section id="slide-org10df48e" data-background="" data-background-repeat="t">
<h4 id="org10df48e"><span class="section-number-4">4.2.8</span> Special values</h4>
<ul>
<li><code>NA</code>: missing value</li>
<li><code>Inf</code>: infinity</li>
<li><code>TRUE</code>, <code>FALSE</code></li>
<li><code>NULL</code>: value undefined</li>

</ul>
</section>
</section>
<section>
<section id="slide-org3705636" data-background="" data-background-repeat="t">
<h3 id="org3705636"><span class="section-number-3">4.3</span> Data structures</h3>
<div class="outline-text-3" id="text-4-3">
</div></section>
<section id="slide-org78c5283" data-background="" data-background-repeat="t">
<h4 id="org78c5283"><span class="section-number-4">4.3.1</span> Atomic vector</h4>
<ul>
<li>The basic data structure in <code>R</code></li>
<li>One dimension</li>
<li><p>
Usually created with <code>c()</code> (combine) 
</p>
<div class="org-src-container">

<pre><code class="R" >x <- c(1.2, 2.3, 3.0); x;
x <- c(10L, 12L, 1L); x;
x <- c(TRUE, T, FALSE, F); x;
x <- c("a", "b"); x;
</code></pre>
</div>

<pre class="example">
[1] 1.2 2.3 3.0
[1] 10 12  1
[1]  TRUE  TRUE FALSE FALSE
[1] "a" "b"
</pre></li>

<li><p>
All elements in an atomic vector must be same type
</p>
<ul>
<li>When different types are combined, they will be coerced to the most
flexible type</li>
<li>Types from least to most flexible are: logical, integer, double, and
character</li>

</ul>
<div class="org-src-container">

<pre><code class="R" >x <- c("a", 1, T); x;
x <- c(1, F); x;
x <- c(1L, 10.2); x;
</code></pre>
</div>

<pre class="example">
[1] "a"    "1"    "TRUE"
[1] 1 0
[1]  1.0 10.2
</pre></li>

</ul>

</section>
<section id="slide-orgd77a105" data-background="" data-background-repeat="t">
<h4 id="orgd77a105"><span class="section-number-4">4.3.2</span> Factor</h4>
<ul>
<li>One kind of attribute of vectors</li>
<li>A factor is a vector that can contain only predefined categorical values</li>
<li>The attribute <code>levels</code> of a factor contains the set of allowed values</li>

</ul>
<div class="org-src-container">

<pre><code class="R" >x <- factor(c("M", "F", "F", "M"));
levels(x);
attributes(x);  
table(x);
x <- factor(c("M", "F", "F", "M"), levels=c("M", "F", "Unknown"));
table(x);
</code></pre>
</div>

<pre class="example">
[1] "F" "M"
$levels
[1] "F" "M"

$class
[1] "factor"
x
F M 
2 2
x
      M       F Unknown 
      2       2       0
</pre>

</section>
<section id="slide-orgd33e26f" data-background="" data-background-repeat="t">
<h4 id="orgd33e26f"><span class="section-number-4">4.3.3</span> Matrix and Array</h4>
<ul>
<li>Matrix in two-dimension</li>
<li>Array can be any dimension</li>
<li><p>
Example 
</p>
<div class="org-src-container">

<pre><code class="R" >x <- matrix(1:16, nrow=4, ncol=4); x;
x <- array(1:18, dim=c(3,3,2)); x;
</code></pre>
</div>

<pre class="example">
     [,1] [,2] [,3] [,4]
[1,]    1    5    9   13
[2,]    2    6   10   14
[3,]    3    7   11   15
[4,]    4    8   12   16
, , 1

     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9

, , 2

     [,1] [,2] [,3]
[1,]   10   13   16
[2,]   11   14   17
[3,]   12   15   18
</pre></li>

<li>All elements in a matrix or an array must be the same type. Different
types will be coerced to the most flexible type. This is the same as
atomic vector</li>
<li>Matrices are combined by <i>rbind()</i>, <i>cbind()</i></li>

</ul>

</section>
<section  data-background="" data-background-repeat="t">
<ul>
<li><i>%o%</i>: outer product of two arrays</li>
<li><i>t()</i>: transpose of a matrix</li>
<li><i>%*%</i>: matrix product</li>
<li><i>diag()</i>: diagonal entries of matrix</li>
<li><i>solve()</i>: matrix inverse</li>

</ul>

<div class="org-src-container">

<pre><code class="R" >x <- 1:3; y <- 5:6; x %o% y;
x <- matrix(1:16, c(4,4));
t(x);
diag(x);
x <- matrix(1:4, c(2,2));
x %*% y;
</code></pre>
</div>

<pre class="example">
     [,1] [,2]
[1,]    5    6
[2,]   10   12
[3,]   15   18
     [,1] [,2] [,3] [,4]
[1,]    1    2    3    4
[2,]    5    6    7    8
[3,]    9   10   11   12
[4,]   13   14   15   16
[1]  1  6 11 16
     [,1]
[1,]   23
[2,]   34
</pre>

</section>
<section id="slide-org11eb9ef" data-background="" data-background-repeat="t">
<h4 id="org11eb9ef"><span class="section-number-4">4.3.4</span> List</h4>
<ul>
<li>Elements of lists can be of any type</li>
<li>Lists can contain other lists</li>
<li>Construct lists by using <i>list()</i> instead of <i>c()</i></li>
<li>Lists can be combined by <i>c()</i></li>
<li>Example</li>

</ul>
<div class="org-src-container">

<pre><code class="R" >x <- list("a", 1:4, c(T, F, TRUE), c(1.3, 10));
str(x);
y <- list("Y", x); 
z <- c(x, y);
</code></pre>
</div>
</section>
<section id="slide-org1bd9f8b" data-background="" data-background-repeat="t">
<h4 id="org1bd9f8b"><span class="section-number-4">4.3.5</span> Subsetting</h4>
<ul>
<li>Use <code>[i,j]</code>, <code>[i,]</code>, <code>[,j]</code> to extract or access elements in
<ul>
<li>atomic vector</li>
<li>matrix</li>
<li>array</li>

</ul></li>
<li>Note: Positive indices select elements, negative indices delete elements</li>
<li><p>
<i>Note: The figure below has an error on the row indices. Along the
vertical side of \(X\), the labels should be \(X[1,], X[2,], \ldots,
      X[,5]\).</i>
</p>


<div class="figure">
<p><img src="./images/subset1.png" alt="subset1.png" width="600" />
</p>
</div></li>

</ul>

</section>
<section  data-background="" data-background-repeat="t">
<ul>
<li><p>
Use <code>[i]</code> or <code>[[]]</code> to extract or access elements in lists
</p>


<div class="figure">
<p><img src="./images/subset2.png" alt="subset2.png" width="700" />
</p>
</div></li>

</ul>
</section>
<section id="slide-orgfb845d6" data-background="" data-background-repeat="t">
<h4 id="orgfb845d6"><span class="section-number-4">4.3.6</span> Data frame</h4>
<ul>
<li>Data frame is the most common way of storing data in <code>R</code></li>
<li>The foundation of data analysis in <code>R</code></li>
<li>A data frame is indeed a list of equal-length vectors. Thus, it is
2-dimensional and shares properties of both the matrix and the list
<ul>
<li><i>names()</i>, <i>colnames()</i>, <i>rownames()</i>, <i>length()</i>, <i>ncol()</i>, <i>nrow()</i>,
<i>rbind()</i>, <i>cbind()</i></li>

</ul></li>
<li>Created by <i>data.frame()</i></li>

</ul>

</section>
<section  data-background="" data-background-repeat="t">

<ul>
<li>Several functions related to data frame
<ul>
<li><i>read.table()</i>, <i>write.table()</i></li>
<li><i>subset()</i></li>

</ul></li>
<li>An important <code>R</code> package for data manipulation: <i>sqldf</i></li>

</ul>
</section>
</section>
<section>
<section id="slide-org789a5ba" data-background="" data-background-repeat="t">
<h3 id="org789a5ba"><span class="section-number-3">4.4</span> Exercise</h3>
<div class="outline-text-3" id="text-4-4">
</div></section>
<section id="slide-org053fd9b" data-background="" data-background-repeat="t">
<h4 id="org053fd9b"><span class="section-number-4">4.4.1</span> Objects</h4>
<ul>
<li>Create a character vector, a numeric vector, a logical vector, a character
matrix, a numeric matrix, a factor, a data frame and a list</li>
<li>Apply each of the following functions to these objects: <i>length()</i>,
<i>class()</i>, <i>mode()</i>, <i>typeof()</i>, and <i>attributes()</i></li>
<li>Check the help file for these functions</li>
<li>What did you learn?</li>
<li>Get a complete list of <i>coercion</i> functions (e.g. <i>as.character()</i>),
prefixed with <i>as.</i> by <code>apropos("^as\\.")</code></li>
<li>Try some of the coercion function using the objects created (e.g.
<i>as.vector()</i> on matrix). What did you learn?</li>

</ul>
</section>
<section id="slide-org8a1985a" data-background="" data-background-repeat="t">
<h4 id="org8a1985a"><span class="section-number-4">4.4.2</span> Objects: solution</h4>
<div class="org-src-container">

<pre><code class="R" >x <- c("a", "b");      
x <- c(1.2, 2.3, 3.0);
x <- c(TRUE, T, FALSE, F); 
x <- c(10L, 12L, 1L);
x <- matrix(1:10, nrow=5, ncol=2);
x <- factor(c(1,1,2,2,3))
x <- list(v1 = c("a","b"), v2 = c(1.2,2.3,3.0));
y <- as.vector(matrix(1:10, nrow=5, ncol=2));
</code></pre>
</div>

</section>
<section id="slide-org19d8f60" data-background="" data-background-repeat="t">
<h4 id="org19d8f60"><span class="section-number-4">4.4.3</span> Matrix</h4>
<ul>
<li>Create a 4 by 5 matrix with numbers 1 to 20 in it</li>
<li>Which matrix element does <code>x[6]</code> reference in the matrix? What can you
conclude about how <code>R</code> is storing the matrix?</li>
<li>What happens when you try to access the non-existent element
<code>x[4,2]</code>? What about <code>x["e", "c"]</code>?</li>
<li>Create another 4 by 2 matrix with numbers 21 to 28</li>
<li>Combine the matrices together</li>
<li>What is the 5th row in the combined matrix? What is the 3rd column?</li>
<li>Remove the 2nd row from the combined and matrix</li>
<li>How many elements are left in the result matrix?</li>

</ul>
</section>
<section id="slide-org87d9a28" data-background="" data-background-repeat="t">
<h4 id="org87d9a28"><span class="section-number-4">4.4.4</span> Matrix: solution</h4>
<div class="org-src-container">

<pre><code class="R" >x <- matrix(1:20, nrow=4, ncol=5);
y <- matrix(21:28, nrow=4, ncol=2);
z <- cbind(x,y);
z[5,];
z[,3];
z[-2,];
length(z[-2,]);
</code></pre>
</div>

<pre class="example">
Error in z[5, ] : subscript out of bounds
[1]  9 10 11 12
     [,1] [,2] [,3] [,4] [,5] [,6] [,7]
[1,]    1    5    9   13   17   21   25
[2,]    3    7   11   15   19   23   27
[3,]    4    8   12   16   20   24   28
[1] 21
</pre>

</section>
<section id="slide-orgdb4293b" data-background="" data-background-repeat="t">
<h4 id="orgdb4293b"><span class="section-number-4">4.4.5</span> Factor</h4>
<ul>
<li><p>
The dataset <code>esoph</code> in <code>R</code> contains clinical data from a case-control study of
esophageal cancer in Ile-et-Vilaine, France. Define new factors that
describe the age group, alcohol usage, and tobacco with
</p>

<div class="org-src-container">

<pre><code class="R" >ageE <- esoph$agegp
alcE <- esoph$alcgp
tobE <- esoph$tobgp
</code></pre>
</div></li>

<li>Tabulate the smoking usage per age group and the alcohol usage per age group
<ul>
<li>Hint: use function <i>table()</i></li>

</ul></li>

<li>What happens when you tabulate all three factors using the command
<code>table(ageE, alcE, tobE)</code>?</li>

<li>Subset the age groups to samples under 55 and tabulate smoking usage per
age group in this subset. Be sure that the older age groups do not appear
in your summary table.</li>

</ul>
</section>
<section id="slide-org109fa7a" data-background="" data-background-repeat="t">
<h4 id="org109fa7a"><span class="section-number-4">4.4.6</span> Factor: solution</h4>
<div class="org-src-container">

<pre><code class="R" >data(esoph);
ageE <- esoph$agegp;
alcE <- esoph$alcgp;
tobE <- esoph$tobgp;
table(alcE, ageE);
table(tobE, ageE);
table(alcE, tobE, ageE);

subid <- which(ageE %in% levels(ageE)[1:3]);
##recreate factor to keep only levels of interest 
new.ageE <- factor(ageE[subid]);
new.tobE <- tobE[subid];
table(new.tobE, new.ageE);
</code></pre>
</div>

<pre class="example">
           ageE
alcE        25-34 35-44 45-54 55-64 65-74 75+
  0-39g/day     4     4     4     4     4   3
  40-79         4     4     4     4     3   4
  80-119        3     4     4     4     4   2
  120+          4     3     4     4     4   2
          ageE
tobE       25-34 35-44 45-54 55-64 65-74 75+
  0-9g/day     4     4     4     4     4   4
  10-19        4     4     4     4     4   4
  20-29        3     4     4     4     4   1
  30+          4     3     4     4     3   2
, , ageE = 25-34

           tobE
alcE        0-9g/day 10-19 20-29 30+
  0-39g/day        1     1     1   1
  40-79            1     1     1   1
  80-119           1     1     0   1
  120+             1     1     1   1

, , ageE = 35-44

           tobE
alcE        0-9g/day 10-19 20-29 30+
  0-39g/day        1     1     1   1
  40-79            1     1     1   1
  80-119           1     1     1   1
  120+             1     1     1   0

, , ageE = 45-54

           tobE
alcE        0-9g/day 10-19 20-29 30+
  0-39g/day        1     1     1   1
  40-79            1     1     1   1
  80-119           1     1     1   1
  120+             1     1     1   1

, , ageE = 55-64

           tobE
alcE        0-9g/day 10-19 20-29 30+
  0-39g/day        1     1     1   1
  40-79            1     1     1   1
  80-119           1     1     1   1
  120+             1     1     1   1

, , ageE = 65-74

           tobE
alcE        0-9g/day 10-19 20-29 30+
  0-39g/day        1     1     1   1
  40-79            1     1     1   0
  80-119           1     1     1   1
  120+             1     1     1   1

, , ageE = 75+

           tobE
alcE        0-9g/day 10-19 20-29 30+
  0-39g/day        1     1     0   1
  40-79            1     1     1   1
  80-119           1     1     0   0
  120+             1     1     0   0
          new.ageE
new.tobE   25-34 35-44 45-54
  0-9g/day     4     4     4
  10-19        4     4     4
  20-29        3     4     4
  30+          4     3     4
</pre>

</section>
<section id="slide-org70270bf" data-background="" data-background-repeat="t">
<h4 id="org70270bf"><span class="section-number-4">4.4.7</span> List</h4>
<ul>
<li>The object <code>iris</code> in the datasets package contains a listing of
observations of <code>Sepal.Length</code>, <code>Sepal.Width</code>, <code>Petal.Length</code>,
<code>Petal.Width</code>, and <code>Species</code> used for some of Fisher’s foundational work.</li>
<li>Create a list that describes the attributes of the petal for each species
<ul>
<li>Hint: I first found which species were in the list, subset the data for
each species, and then set up my list object</li>

</ul></li>
<li>Using this list object, find the mean <code>Petal.Length</code> and petal area (length
× width) of the species setosa
<ul>
<li>Hint: use function <i>mean()</i> to get mean</li>

</ul></li>

</ul>
</section>
<section id="slide-org017f8f1" data-background="" data-background-repeat="t">
<h4 id="org017f8f1"><span class="section-number-4">4.4.8</span> List: solution</h4>
<div class="org-src-container">

<pre><code class="R" >data(iris);
x <- list(setosa = subset(iris, Species == "setosa"),
          versicolor = subset(iris, Species == "versicolor"))

mean(x$setosa$Petal.Length);
mean(x$setosa$Petal.Length * x$setosa$Petal.Width);
</code></pre>
</div>

<pre class="example">
[1] 1.462
[1] 0.3656
</pre>

</section>
<section id="slide-orgb480189" data-background="" data-background-repeat="t">
<h4 id="orgb480189"><span class="section-number-4">4.4.9</span> Data frame</h4>
<ul>
<li><p>
Get the Bird data into R
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<tbody>
<tr>
<td class="org-right">&#xa0;</td>
<td class="org-right">Wingcrd</td>
<td class="org-right">Tarus</td>
</tr>

<tr>
<td class="org-right">1</td>
<td class="org-right">59.00</td>
<td class="org-right">22.30</td>
</tr>

<tr>
<td class="org-right">2</td>
<td class="org-right">55.00</td>
<td class="org-right">19.70</td>
</tr>

<tr>
<td class="org-right">3</td>
<td class="org-right">53.50</td>
<td class="org-right">20.80</td>
</tr>

<tr>
<td class="org-right">4</td>
<td class="org-right">55.00</td>
<td class="org-right">20.30</td>
</tr>
</tbody>
</table></li>
<li>Find the subset data with Tarus longer than <code>20</code></li>
<li>Use <code>SQL</code> to find the subset data with Tarus longer than <code>20</code></li>
<li>Write the Bird data to a file and read it back to <code>R</code></li>

</ul>
</section>
<section id="slide-orgfe81f53" data-background="" data-background-repeat="t">
<h4 id="orgfe81f53"><span class="section-number-4">4.4.10</span> Dataframe: solution</h4>
<div class="org-src-container">

<pre><code class="R" >Wingcrd   <- c(59, 55, 53.5, 55);
Tarsus    <- c(22.3, 19.7, 20.8, 20.3);
birddat   <- data.frame(Wingcrd=Wingcrd, Tarsus=Tarsus);
head(birddat);

sub.data <- subset(birddat, Tarsus > 20);
sub.data;

require(sqldf);
sqldf("select * from birddat where Tarsus > 20");

write.table(birddat, file="bird.txt");
save(birddat, file="bird.Rdata");
read.table(file="bird.txt", header=T)
load(file="bird.Rdata");
</code></pre>
</div>

<pre class="example">
  Wingcrd Tarsus
1    59.0   22.3
2    55.0   19.7
3    53.5   20.8
4    55.0   20.3
  Wingcrd Tarsus
1    59.0   22.3
3    53.5   20.8
4    55.0   20.3
  Wingcrd Tarsus
1    59.0   22.3
2    53.5   20.8
3    55.0   20.3
  Wingcrd Tarsus
1    59.0   22.3
2    55.0   19.7
3    53.5   20.8
4    55.0   20.3
</pre>

</section>
</section>
<section>
<section id="slide-orgb0032f4" data-background="./images/Rlogo2.png" data-background-repeat="t">
<h2 id="orgb0032f4"><span class="section-number-2">5</span> Appendix</h2>
</section>
</section>
<section>
<section id="slide-org973fa30" data-background="" data-background-repeat="t">
<h3 id="org973fa30"><span class="section-number-3">5.1</span> References</h3>
<ul>
<li>R project: <a href="http://www.r-project.org">http://www.r-project.org</a></li>
<li>CRAN: <a href="http://cran.r-project.org">http://cran.r-project.org</a></li>
<li>CRAN mirror: <a href="https://cran.r-project.org/mirrors.html">https://cran.r-project.org/mirrors.html</a></li>
<li>Bioconductor: <a href="http://www.bioconductor.org">http://www.bioconductor.org</a></li>
<li>Search R topics: <a href="http://www.rseek.org/">http://www.rseek.org/</a></li>
<li>RStudio: <a href="http://www.rstudio.com">http://www.rstudio.com</a></li>
<li>RStudio keybord shortcuts:
<ul>
<li><a href="https://support.rstudio.com/hc/en-us/articles/200711853-Keyboard-Shortcuts">https://support.rstudio.com/hc/en-us/articles/200711853-Keyboard-Shortcuts</a></li>

</ul></li>
<li>R manuals and docs: <a href="https://cran.r-project.org/doc/">https://cran.r-project.org/doc/</a></li>
<li>R blog:  <a href="http://www.r-bloggers.com/">http://www.r-bloggers.com/</a></li>
<li>R online tutorials:  <a href="https://www.datacamp.com/">https://www.datacamp.com/</a></li>
<li>A blog about \(<-\) versus \(=\) in <code>R</code>: <a href="http://blog.revolutionanalytics.com/2008/12/use-equals-or-arrow-for-assignment.html">Use = or &lt;- for assignment?</a></li>

</ul>
</section>
</section>
</div>
</div>
<script src="https://cdn.jsdelivr.net/reveal.js/3.0.0/lib/js/head.min.js"></script>
<script src="https://cdn.jsdelivr.net/reveal.js/3.0.0/js/reveal.js"></script>

<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

controls: true,
progress: true,
history: false,
center: true,
slideNumber: 'c/t',
rollingLinks: true,
keyboard: true,
overview: true,
margin: 0.10,

theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
transition: Reveal.getQueryHash().transition || 'convex', // default/cube/page/concave/zoom/linear/fade/none
transitionSpeed: 'default',
multiplex: {
    secret: '', // null if client
    id: '', // id, obtained from socket.io server
    url: '' // Location of socket.io server
},

// Optional libraries used to extend on reveal.js
dependencies: [
 { src: 'https://cdn.jsdelivr.net/reveal.js/3.0.0/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: 'https://cdn.jsdelivr.net/reveal.js/3.0.0/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: 'https://cdn.jsdelivr.net/reveal.js/3.0.0/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }]
});
</script>
</body>
</html>
